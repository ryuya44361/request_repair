<main>
   <div class = "container">
     <div class = "row my-3">
       <div class = "col-4">
         <h2>予約画面</h2>
       </div>
     </div>

        <%= month_calendar do |date| %>
          <%= date.day %><br />
          
          <%  
            @restrictions_day = @restrictions.where(reservation_day: date)
            # 以下、予約上限の計算変数
            @restrictions_sum = @restrictions_day.where.not(update_status: 0).sum(:headcount)
            @default_restrictions_count = @restrictions_day.where(update_status: 0).count
            @default_restrictions_sum = @default_restrictions_count * @default_limits.last.headcount
            @default_limits_count = @default_limits.count
            @default_limits_sum = @default_limits_count * @default_limits.last.headcount
            # 以上、予約上限の計算変数
          %>
         
          <% if @restrictions_sum + @default_restrictions_sum > 0 %>
            <%= link_to "〇", time_reservations_path(date) %>
          <% elsif @restrictions_day.blank? && @default_limits_sum > 0 %>
            <%= link_to "〇", time_reservations_path(date) %>
          <% else %>
            <p> - </p>
          <% end %>
        <% end %>
  </div>
</main>